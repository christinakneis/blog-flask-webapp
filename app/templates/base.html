<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Christina Kneis - Systems engineer and product developer. Elegant problem solving, engineering complex systems, and driving operational excellence." />
    <meta name="author" content="Christina Kneis" />
    <meta name="theme-color" content="#0a0a0f" />
    <title>{% block title %}Christina Kneis{% endblock %}</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='assets/favicon.ico') }}" />

    <!-- Preconnect to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Main Stylesheet -->
    <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet" />

    {% block head %}{% endblock %}
</head>
<body class="bg-stars bg-noise">
    <!-- Skip to main content (accessibility) -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Navigation -->
    <nav class="nav" role="navigation" aria-label="Main navigation">
        <div class="nav__container">
            <!-- Brand -->
            <a href="/" class="nav__brand">
                CHRISTINA KNEIS<span class="nav__brand-dot">.</span>
            </a>

            <!-- Desktop Navigation Links -->
            <div class="nav__links">
                <a href="/" class="nav__link {% if request.endpoint == 'main.home' %}nav__link--active{% endif %}">
                    Home
                </a>
                <a href="{{ url_for('main.consulting') }}" class="nav__link {% if request.endpoint == 'main.consulting' %}nav__link--active{% endif %}">
                    Consulting
                </a>
                <a href="{{ url_for('main.blog') }}" class="nav__link {% if request.endpoint == 'main.blog' or request.endpoint == 'main.post' %}nav__link--active{% endif %}">
                    Blog
                </a>
                <a href="{{ url_for('main.about') }}" class="nav__link {% if request.endpoint == 'main.about' %}nav__link--active{% endif %}">
                    About
                </a>
                <a href="{{ url_for('main.contact') }}" class="nav__link {% if request.endpoint == 'main.contact' %}nav__link--active{% endif %}">
                    Contact
                </a>
            </div>

            <!-- Sector Indicator -->
            <div class="nav__sector">
                <span class="nav__sector-label">Sector:</span>
                <span class="nav__sector-value">
                    {% if request.endpoint == 'main.home' %}HOME
                    {% elif request.endpoint == 'main.consulting' %}CONSULTING
                    {% elif request.endpoint == 'main.blog' %}BLOG
                    {% elif request.endpoint == 'main.post' %}TRANSMISSION
                    {% elif request.endpoint == 'main.about' %}ABOUT
                    {% elif request.endpoint == 'main.contact' %}CONTACT
                    {% else %}NAVIGATION{% endif %}
                </span>
            </div>

            <!-- Mobile Toggle -->
            <button class="nav__toggle" aria-label="Toggle navigation menu" aria-expanded="false" onclick="toggleMobileNav()">
                <svg class="nav__toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>

        <!-- Scroll Progress Bar -->
        <div class="nav__progress" id="scroll-progress"></div>
    </nav>

    <!-- Mobile Navigation Overlay -->
    <div class="nav__mobile" id="mobile-nav" aria-hidden="true">
        <div class="nav__mobile-header">
            <a href="/" class="nav__brand">
                CHRISTINA KNEIS<span class="nav__brand-dot">.</span>
            </a>
            <button class="nav__mobile-close" aria-label="Close navigation menu" onclick="toggleMobileNav()">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <div class="nav__mobile-links">
            <a href="/" class="nav__mobile-link {% if request.endpoint == 'main.home' %}nav__mobile-link--active{% endif %}" onclick="toggleMobileNav()">
                Home
            </a>
            <a href="{{ url_for('main.consulting') }}" class="nav__mobile-link {% if request.endpoint == 'main.consulting' %}nav__mobile-link--active{% endif %}" onclick="toggleMobileNav()">
                Consulting
            </a>
            <a href="{{ url_for('main.blog') }}" class="nav__mobile-link {% if request.endpoint == 'main.blog' %}nav__mobile-link--active{% endif %}" onclick="toggleMobileNav()">
                Blog
            </a>
            <a href="{{ url_for('main.about') }}" class="nav__mobile-link {% if request.endpoint == 'main.about' %}nav__mobile-link--active{% endif %}" onclick="toggleMobileNav()">
                About
            </a>
            <a href="{{ url_for('main.contact') }}" class="nav__mobile-link {% if request.endpoint == 'main.contact' %}nav__mobile-link--active{% endif %}" onclick="toggleMobileNav()">
                Contact
            </a>
        </div>
    </div>

    <!-- Navigation Spacer -->
    <div class="nav-spacer"></div>

    <!-- Main Content -->
    <main id="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer__container">
                <div class="footer__brand">
                    <span class="footer__brand-name">CHRISTINA KNEIS<span class="footer__brand-dot">.</span></span>
                    <span class="footer__copyright">// {{ 2025 }} All systems nominal</span>
                </div>
                <div class="footer__links">
                    <a href="https://www.linkedin.com/in/christina-kneis" target="_blank" rel="noopener noreferrer" class="footer__link">
                        LinkedIn
                    </a>
                    <a href="https://github.com/christinakneis" target="_blank" rel="noopener noreferrer" class="footer__link">
                        GitHub
                    </a>
                    <a href="https://calendly.com/christina-m-kneis" target="_blank" rel="noopener noreferrer" class="footer__link">
                        Schedule
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Mobile Navigation Toggle
        function toggleMobileNav() {
            const mobileNav = document.getElementById('mobile-nav');
            const toggle = document.querySelector('.nav__toggle');
            const isOpen = mobileNav.classList.contains('nav__mobile--open');

            if (isOpen) {
                mobileNav.classList.remove('nav__mobile--open');
                mobileNav.setAttribute('aria-hidden', 'true');
                toggle.setAttribute('aria-expanded', 'false');
                document.body.style.overflow = '';
            } else {
                mobileNav.classList.add('nav__mobile--open');
                mobileNav.setAttribute('aria-hidden', 'false');
                toggle.setAttribute('aria-expanded', 'true');
                document.body.style.overflow = 'hidden';
            }
        }

        // Scroll Progress Indicator
        function updateScrollProgress() {
            const scrollProgress = document.getElementById('scroll-progress');
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            scrollProgress.style.width = scrollPercent + '%';
        }

        // Scroll Reveal Animation
        function initScrollReveal() {
            const reveals = document.querySelectorAll('.reveal, .reveal-stagger');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('reveal--visible', 'reveal-stagger--visible');
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            reveals.forEach(reveal => observer.observe(reveal));
        }

        // Initialize on DOM ready
        document.addEventListener('DOMContentLoaded', function() {
            initScrollReveal();
            window.addEventListener('scroll', updateScrollProgress, { passive: true });
        });

        // Close mobile nav on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const mobileNav = document.getElementById('mobile-nav');
                if (mobileNav.classList.contains('nav__mobile--open')) {
                    toggleMobileNav();
                }
            }
        });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
